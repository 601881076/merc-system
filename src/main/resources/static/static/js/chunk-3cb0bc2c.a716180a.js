(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3cb0bc2c"],{"490c":function(t,e,a){},c269:function(t,e,a){"use strict";a("490c")},cddd:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a481"),a("6b54"),a("ac6a");var o=a("4360"),s=(a("c4e3"),a("bc3a")),l=a.n(s),r=a("5c96");function i(t){var e=window.location.href,a=-1!=e.indexOf("/dist")?e.replace("dist/index.html","".concat(t.url).concat(t.params?"?"+t.params:"")):"";console.log(a),l()({method:t.method,url:"".concat(a).concat(t.url).concat(t.params?"?"+t.params:""),responseType:"blob",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o["a"].getters.token}}).then((function(e){if(console.log(e),200==e.status){var a=document.createElement("a"),o=new Blob([e.data],{type:"application/vnd.ms-excel"});a.style.display="none",a.href=URL.createObjectURL(o),a.setAttribute("download",t.fileName),document.body.appendChild(a),a.click(),document.body.removeChild(a)}else r["Message"].error({title:"失败",message:e.statusText})})).catch((function(t){r["Message"].error({title:"失败",message:t.statusText})}))}a("0fd4")},e543:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"form"},[a("h4",[t._v("上传扣款文件")]),t._v(" "),a("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.editFormRules,"label-width":"140px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"总金额:",prop:"totalAmt"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"40%"},attrs:{type:"number",placeholder:"总金额应与上传文件一致"},model:{value:t.editForm.totalAmt,callback:function(e){t.$set(t.editForm,"totalAmt",e)},expression:"editForm.totalAmt"}})],1),t._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{label:"总笔数:",prop:"totalTrans"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"40%"},attrs:{type:"number",placeholder:"总笔数应与上传文件一致"},model:{value:t.editForm.totalTrans,callback:function(e){t.$set(t.editForm,"totalTrans",e)},expression:"editForm.totalTrans"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上传文件:"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"string","http-request":t.doUpload,"file-list":t.fileList,limit:1,name:"file","auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",icon:"el-icon-upload2",size:"small",type:"primary"},slot:"trigger"},[t._v("上传代扣")]),t._v(" "),a("el-button",{staticStyle:{"padding-left":"40px"},attrs:{type:"text",icon:"el-icon-download",size:"small"},on:{click:t.downloadWh}},[t._v("下载代扣模板")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传1个xlsx/excel文件")])],1)],1),t._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{label:"密码:",prop:"password"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"40%"},attrs:{type:"password","auto-complete":"new-password",placeholder:"请输入密码"},model:{value:t.editForm.password,callback:function(e){t.$set(t.editForm,"password",e)},expression:"editForm.password"}})],1),t._v(" "),a("el-form-item",{staticClass:"form-item"},[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.$refs.upload.submit()}}},[t._v("提交")])],1),t._v(" "),t.batchNo?a("el-form-item",{staticClass:"form-item"},[a("div",[a("span",{staticStyle:{color:"#33CC99"}},[t._v("上传成功，")]),t._v("批次号："+t._s(t.batchNo))])]):t._e()],1)],1)])},s=[],l=a("365c"),r=a("cddd"),i={name:"uploading.vue",data:function(){return{editForm:{totalAmt:"",totalTrans:"",password:""},editFormRules:{totalAmt:[{required:!0,message:"总金额不能为空",trigger:"blur"}],totalTrans:[{required:!0,message:"总笔数不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]},fileList:[],batchNo:""}},created:function(){},methods:{doUpload:function(t){var e=this;this.$refs["editForm"].validate((function(a){if(a){var o=new FormData;o.append("file",t.file),o.append("totalAmt",e.editForm.totalAmt),o.append("totalTrans",e.editForm.totalTrans),o.append("password",e.editForm.password),e.batchNo="",Object(l["b"])("wh/excelImport",o).then((function(t){200==t.code&&(e.batchNo=t.data.batchNo,e.$message.success({type:"success",message:"上传成功"})),e.editForm={totalAmt:"",totalTrans:"",password:""},e.fileList=[]})).catch((function(t){console.log("error",t),e.$message.error(t.message)}))}}))},downloadWh:function(){var t={method:"get",url:"wh/download/wh",fileName:"扣款批次模板.xls"};Object(r["a"])(t)}}},n=i,c=(a("c269"),a("2877")),d=Object(c["a"])(n,o,s,!1,null,"5aae0369",null);e["default"]=d.exports}}]);